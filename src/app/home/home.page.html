<ion-content [fullscreen]="true">
  <!-- 入口頁面 -->
  <div class="welcome-overlay" *ngIf="showWelcomeScreen">
    <div class="welcome-content">
      <div class="welcome-header">
        <h1 class="welcome-title">🎮 遊戲說明</h1>
      </div>
      
      <div class="welcome-instructions">
        <div class="instruction-item">
          <span class="instruction-icon">🕹️</span>
          <span class="instruction-text">左下角搖桿：上下左右移動戰機</span>
        </div>
        
        <div class="instruction-item">
          <span class="instruction-icon">⬆️⬇️</span>
          <span class="instruction-text">方向鍵：移動戰機</span>
        </div>
        
        <div class="instruction-item">
          <span class="instruction-icon">🔥</span>
          <span class="instruction-text">右下角按鈕／空白鍵：發射子彈</span>
        </div>
        
        
      </div>
      
      <button class="welcome-enter-btn" (click)="enterGame()">
        開始遊戲
      </button>
    </div>
  </div>
  
  <div class="game-container">
    <!-- 遊戲信息欄 -->
    <div class="game-info">
      <div class="info-left">
        <div class="score">得分: {{ score }}</div>
        <div class="status" *ngIf="!gameStarted && !gameOver">
          <ion-button class="go-button" color="success" (click)="startGame()">
            GO
          </ion-button>
        </div>
        <div class="status game-running" *ngIf="gameStarted && !gameOver">遊戲進行中</div>
      </div>
      <div class="lives">
        <span class="lives-label">生命:</span>
        <span class="bowl" *ngFor="let life of [].constructor(lives)">🍚</span>
      </div>
    </div>

    <!-- 遊戲畫布 -->
    <div class="canvas-wrapper">
      <canvas #gameCanvas id="gameCanvas"></canvas>
      
      <!-- 觸控控制層 -->
      <div class="touch-controls" *ngIf="gameStarted && !gameOver">
        <!-- 左側虛擬搖桿 -->
        <div class="joystick-container">
          <div class="joystick-base">
            <div class="joystick-stick" 
                 [style.transform]="'translate(' + joystickX + 'px, ' + joystickY + 'px)'">
            </div>
          </div>
        </div>
        
        <!-- 右側射擊按鈕 -->
        <div class="shoot-button" 
             (touchstart)="onShootButtonPress($event)"
             (touchend)="onShootButtonRelease($event)">
          <span>🔥</span>
        </div>
      </div>
    </div>

    <!-- 遊戲結束畫面 -->
    <div class="game-over" *ngIf="gameOver">
      <ion-card>
        <ion-card-header>
          <ion-card-title>遊戲結束！</ion-card-title>
        </ion-card-header>
        <ion-card-content>
          <h2>最終得分: {{ score }}</h2>
          <ion-button expand="block" color="primary" (click)="restartGame()">
            重新開始
          </ion-button>
        </ion-card-content>
      </ion-card>
    </div>
  </div>
</ion-content>
